# This is a parameter-spec file for `test-from-modelmeta.py`.
# It defines how to generate the combinations of parameters that script uses
# to make ncWMS requests. This file in particular covers combinations of
# many different variables, years, timesteps, ncWMS servers, and ncWMS request
# types, but issues only one request per combination.

$combinations:
  - $one:
      ensemble_name: p2a_classic
      models: [PCIC12, anusplin]
      emissions:
        - "historical,rcp85"
        - "historical, rcp85"
        - "historical"

  - $each:
      variable_name:
        #          - cdd
        #        - ffd
        #        - gdd
        #        - hdd
        - pr
  - $each:
      year: [2025, 2055, 2085]

  - $union:
      #      - $one:
      #          timescale: yearly
      - $combinations:
          - $one:
              timescale: yearly
              title: yearly
      - $combinations:
          - $one:
              timescale: seasonal
          - $each:
              - [season, title]
#              - [winter, winter]
              - [fall, fall]
      - $combinations:
          - $one:
              timescale: monthly
          - $each:
              - [month, title]
#              - [jan, jan]
              - [feb, feb]

  - $one:
      delay: 1
      interval: 1
      count: 1
  - $for:
      - [title, ncwms, request, dataset_type]
#      -
#        - prod, GetMap, static
#        - https://services.pacificclimate.org/pcex/ncwms
#        - GetMap
#        - static
      -
        - dev, GetMap, dynamic
        - https://services.pacificclimate.org/dev/pcex/ncwms
        - GetMap
        - dynamic





