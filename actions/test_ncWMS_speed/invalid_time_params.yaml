# Error InvalidDimensionValue (for time) appears to be provoked by
# requesting a map layer for the following parameter combinations:
#   variable_name: pr, year: 2025,  timescale: monthly, month: jan.
# No other combination of parameters provoked this error.
# Later runs with the same parameters provoked no error.
# Hence this error is transient.

# Similarly, these requests sometimes provoke the error LayerNotFound.
# This seems to have happened more often, but the response is transient
# as well, as demonstrated by two successive runs of the below
# parameters, one getting 1 such error and the second getting none.

$combinations:
  - $one:
      ensemble_name: p2a_classic
      models: [PCIC12, anusplin]
      emissions:
        - "historical,rcp85"
        - "historical, rcp85"
        - "historical"
  - $each:
      variable_name:
#        - cdd
#        - ffd
#        - gdd
#        - hdd
        - pr
#        - prsn
#        - tasmean
  - $each:
      year:
        - 2025
#        - 2055
#        - 2085
  - $each:
      - [timescale, season, month, delay]
      - [monthly, ~, jan, 0]
      - [monthly, ~, jun, 0]
      - [seasonal, winter, ~, 0]
      - [seasonal, spring, ~, 0]
      - [yearly, ~, ~, 0]
  - $one:
      interval: 0
      count: 1
      ncwms: https://services.pacificclimate.org/dev/pcex/ncwms
      request: GetMap
      dataset_type: dynamic
      bbox: "-125.00000000000001,65,-112.5,77.5"
      width: 256
      height: 256
      title: dev, GetMap, dynamic
